// Save simulation state to a text file
public void saveState(String filename) {
    try (PrintWriter out = new PrintWriter(filename)) {
        for (SimProcess obj : processes) {
            String objName = obj.getClass().getSimpleName();
            String[][] state = obj.getState();
            for (String[] pair : state) {
                if (pair.length == 2) {
                    out.println(objName + "." + pair[0] + " = " + pair[1]);
                }
            }
        }
        System.out.println("State saved to " + filename);
    } catch (Exception e) {
        System.out.println("Error saving state: " + e.getMessage());
    }
}

// Load simulation state from a text file
public void loadState(String filename) {
    try (Scanner in = new Scanner(new File(filename))) {
        while (in.hasNextLine()) {
            String line = in.nextLine().trim();
            if (line.isEmpty() || line.startsWith("#")) continue;
            if (!line.contains("=")) continue;
            String[] parts = line.split("=");
            String key = parts[0].trim();
            String value = parts[1].trim();

            if (key.contains(".")) {
                String[] path = key.split("\.");
                if (path.length == 2) {
                    String objName = path[0];
                    String field = path[1];
                    setValue(objName, field, value);
                }
            }
        }
        System.out.println("State loaded from " + filename);
    } catch (Exception e) {
        System.out.println("Error loading state: " + e.getMessage());
    }
}
